<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat Page</title>
<style>
    body { font-family: Arial, sans-serif; }
    #chatbox { width: 300px; height: 400px; border: 1px solid #ccc; padding: 10px; overflow-y: scroll; }
    #userInput { width: 295px; }
</style>
<script>
    function sendMessage() {
        var input = document.getElementById('userInput');
        var text = input.value;
        input.value = '';
        if (text.trim() === '') return; // Prevent sending empty messages
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/send_message', true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        xhr.onload = function () {
            if (xhr.status === 200) {
                var response = JSON.parse(xhr.responseText);
                var chatbox = document.getElementById('chatbox');
                chatbox.innerHTML += '<div style="margin-bottom: 10px;"><strong>You:</strong> ' + text + '</div><div style="color: blue; margin-bottom: 20px;"><strong>Bot:</strong> ' + response.reply + '</div>';
                chatbox.scrollTop = chatbox.scrollHeight;
            } else {
                console.error('Error with the request');
            }
        };
        xhr.onerror = function () {
            console.error('Request failed');
        };
        xhr.send(JSON.stringify({message: text}));
    }
</script>
</head>
<body>
    <h2>Chat with us!</h2>
    <div id="chatbox"></div>
    <input type="text" id="userInput" onkeydown="if (event.key === 'Enter') sendMessage()">
    <button onclick="sendMessage()">Send</button>
</body>
</html>
